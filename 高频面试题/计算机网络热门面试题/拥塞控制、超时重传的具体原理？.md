# 拥塞控制、超时重传的具体原理？

拥塞控制：

拥塞控制的目的是避免网络中的拥塞，保证网络的稳定性。TCP使用拥塞窗口（Congestion Window）来控制发送方的数据发送速率。

慢启动：当TCP建立连接时，发送方将初始拥塞窗口设置为一个比较小的值（一般为一个报文段的大小），然后随着收到的确认报文的增加，指数级地增加拥塞窗口的大小。这样做的目的是保守地探测当前网络的容量，避免一开始就发送大量数据造成网络拥塞。

拥塞避免：一旦拥塞窗口达到一个阈值（拥塞窗口大小的一半），TCP发送方采用线性增加的方式增加拥塞窗口，以更稳定地发送数据。即拥塞窗口的增加速率由指数增长变成线性增长，减缓拥塞窗口增长的速度。

快速重传：当接收方收到的重复确认（ACK）达到一定数量时，表示发送的数据部分被丢失，TCP发送方会立即重传对应的丢失部分数据，而不必等待超时。

快速恢复：在进行快速重传后，TCP发送方将拥塞窗口减半，并进入快速恢复状态。在这个状态下，拥塞窗口仍然线性增加，但增加速度降低。

超时重传：

当数据发送后，TCP发送方会启动一个定时器，等待接收方发送确认报文。如果在定时器时间内没有收到确认，则认为数据丢失，TCP发送方会立即重传该数据。

超时时间的选择是有一定策略的，一般会根据网络环境动态调整。如果确认报文的返回时间很短，则认为网络较好，可以采用较短的超时时间。反之，若返回时间较长，则认为网络拥塞或延迟较高，需要设置较长的超时时间。

超时重传主要用于检测丢失的数据，并尽快重新发送以保证数据的可靠传输。但超时重传容易造成网络拥塞，因此拥塞控制机制与超时重传机制相互配合，对网络拥塞进行控制与避免。