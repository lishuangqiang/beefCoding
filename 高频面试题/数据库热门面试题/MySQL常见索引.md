# MySQL常见索引

> 本文作者：[程序员小白条](https://github.com/luoye6)
>
> 本站地址：[https://xbt.xiaobaitiao.top](https://xbt.xiaobaitiao.top)

- MySQL常见索引有: 主键索引、唯一索引、普通索引、全文索引、组合索引(最左前缀)
- 主键索引特点：唯一性，非空，自增（如果使用自增主键的话) 、支持快速查询和更新操作。使用场景: 用于经常需要使用单条记录进行查询和更新操作的场景。
- 唯一索引: 唯一性、可以为空，支持快速查询和更新操作，使用场景:保持列值唯一的场景。
- 普通索引： 普通索引是最基本的索引类型，可以为空、没有唯一性限制，一个表可以有多个普通索引。使用场景: 支持快速查询和排序操作。
- 全文索引: 全文索引是用于全文检索的索引类型，特点：支持关键字搜索，不支持模糊搜索，查询较慢，只支持特定的数据类型，例如文本，长文本等，适用于需要对文本数据进行搜索的场景。 
- 组合索引: 将多个列组合在一起创建一个索引，特点：提高查询效率，在多个列需要查询的情况下，组合索引可以避免对表进行全表扫描。优化排序操作，在多个列排序的时候，组合索引优化排序。覆盖索引:如果查询语句中只需要返回组合索引中的列，那么直接从组合索引中获取数据，避免对表进行IO操作。但是要注意组合顺序，通常将区分度高的列放在组合索引的前面。



按照数据结构维度划分：

- BTree 索引：MySQL 里默认和最常用的索引类型。只有叶子节点存储 value，非叶子节点只有指针和 key。存储引擎 MyISAM 和 InnoDB 实现 BTree 索引都是使用 B+Tree，但二者实现方式不一样（前面已经介绍了）。
- 哈希索引：类似键值对的形式，一次即可定位。
- RTree 索引：一般不会使用，仅支持 geometry 数据类型，优势在于范围查找，效率较低，通常使用搜索引擎如 ElasticSearch 代替。
- 全文索引：对文本的内容进行分词，进行搜索。目前只有 CHAR、VARCHAR ，TEXT 列上可以创建全文索引。一般不会使用，效率较低，通常使用搜索引擎如 ElasticSearch 代替。

按照底层存储方式角度划分：

- 聚簇索引（聚集索引）：索引结构和数据一起存放的索引，InnoDB 中的主键索引就属于聚簇索引。
- 非聚簇索引（非聚集索引）：索引结构和数据分开存放的索引，二级索引(辅助索引)就属于非聚簇索引。MySQL 的 MyISAM 引擎，不管主键还是非主键，使用的都是非聚簇索引。

按照应用维度划分：

- 主键索引：加速查询 + 列值唯一（不可以有 NULL）+ 表中只有一个。
- 普通索引：仅加速查询。
- 唯一索引：加速查询 + 列值唯一（可以有 NULL）。
- 覆盖索引：一个索引包含（或者说覆盖）所有需要查询的字段的值。
- 联合索引：多列值组成一个索引，专门用于组合搜索，其效率大于索引合并。
- 全文索引：对文本的内容进行分词，进行搜索。目前只有 CHAR、VARCHAR ，TEXT 列上可以创建全文索引。一般不会使用，效率较低，通常使用搜索引擎如 ElasticSearch 代替。

MySQL 8.x 中实现的索引新特性：

- 隐藏索引：也称为不可见索引，不会被优化器使用，但是仍然需要维护，通常会软删除和灰度发布的场景中使用。主键不能设置为隐藏（包括显式设置或隐式设置）。
- 降序索引：之前的版本就支持通过 desc 来指定索引为降序，但实际上创建的仍然是常规的升序索引。直到 MySQL 8.x 版本才开始真正支持降序索引。另外，在 MySQL 8.x 版本中，不再对 GROUP BY 语句进行隐式排序。
- 函数索引：从 MySQL 8.0.13 版本开始支持在索引中使用函数或者表达式的值，也就是在索引中可以包含函数或者表达式。